# 設計

- 作るもの：マークダウンブログ
- ブログタイトル：西田明正のブログ
- ブログURL：blog.akimasanishida.com

## サイトの構成

### ディレクトリ構成

| ページ        | パス                         | 内容                        |
| ---------- | -------------------------- | ------------------------- |
| トップページ     | `/`                        | 最新記事一覧（新着順）＋人気記事（オプション）   |
| 記事ページ      | `/posts/[slug]`            | 個別記事ページ                   |
| アーカイブ（年）   | `/archives/[year]`         | 指定年のすべての記事                |
| アーカイブ（月）   | `/archives/[year]/[month]` | 指定年月の記事                   |
| カテゴリー一覧ページ | `/categories`              | カテゴリーの一覧（タグクラウド風など）       |
| カテゴリーページ   | `/categories/[category]`   | 指定カテゴリーのすべての記事            |
| About ページ  | `/about`                   | サイトやあなたの紹介                |
| 検索結果ページ    | `/search?q=...`            | キーワードによる記事検索結果            |
| 管理画面（任意）   | `/admin`                   | Markdown/画像の投稿・編集画面（認証付き） |

**`app/` 以下の構成**

```
app/
├── layout.tsx
├── page.tsx              # トップページ
├── posts/
│   └── [slug]/
│       └── page.tsx      # 記事詳細
├── archives/
│   └── [year]/
│       └── page.tsx      # 年別アーカイブ
│       └── [month]/
│           └── page.tsx  # 月別アーカイブ
├── categories/
│   └── [category]/
│       └── page.tsx      # カテゴリー別記事
├── search/
│   └── page.tsx          # 検索結果ページ
├── about/
│   └── page.tsx          # Aboutページ
├── admin/
│   └── page.tsx          # 管理画面
        └── post/
        │   └── page.tsx  # 記事投稿・編集画面
        └── image/
            └── page.tsx  # 画像一覧（投稿・削除画面）
```

**ブログ投稿**

- Markdown は Firebase Firestore に保存
- 画像は Firebase Storage に保存
- サーバ側で記事を取得（`fetch` や `server component` を使用）
- SEO 対策も考慮

### About ページ

文章は後で入れる

### 記事

#### メタデータ

- タイトル
- スラッグ（URLに使用）
- 投稿日時（自動生成）
- 更新日時（自動生成）
- カテゴリ（一つのみ）
- タグ（複数・将来拡張用）

#### 機能

- 見出しにリンクアンカーを付与。Hover すると、クリックでリンクを取得できる🔗 icon を表示

### 検索結果

- 検索ボックスを表示
- その下に、検索結果を表示
- 記事一覧表示は `PostList` コンポーネントを使用
- 該当する記事がない場合は、「の検索結果はありませんでした。」と表示。例）「あ」と検索して該当なし：「あ の検索結果はありませんでした。」

### Admin

#### 認証

- Firebase Authentication を使用（GitHub アカウントで認証）
- 未ログインの場合は、ログイン画面を表示
- ログイン済みの場合は、Admin ページを表示

### コンポーネント

- `Header`（ナビゲーション）
    - 左揃えでブログタイトル（クリックすると `/` へ）
    - 右揃えでナビゲーションメニュー：
        - `/`（Home）：トップページ
        - `about`（About）：Aboutページ
        - `HP`（HP）：`https://akimasanishida.com` へ遷移
- `Footer`
    - アーカイブ・カテゴリー一覧・検索を3カラムで表示
        - アーカイブ：記事が存在する年を一覧表示。先頭にトグル ▶ を付与。年をクリックすると、年別アーカイブページに遷移し、トグルをクリックすると、年の下に月別アーカイブを表示。その年が開かれている場合、トグルは ▼ に変化。アーカイブページや投稿記事では、その年のトグルが開かれている状態で表示される。それ以外の場合は、最新の年が開かれている状態で表示される。
            - 月については、記事が存在する月を一覧表示。先頭は通常の箇条書きの点を付与。月をクリックすると、月別アーカイブページに遷移する。
        - カテゴリー：カテゴリーを通常のリストで一覧表示。カテゴリーをクリックすると、カテゴリー別記事ページに遷移する。
        - 検索：検索ボックスを表示。キーワードを入力して Enter を押す or 虫眼鏡ボタンを押すと、検索結果ページに遷移する。
    - その下に著作権表示
- `SearchBox`（検索ボックス）
    - 検索ボックスを表示。キーワードを入力して Enter を押す or 虫眼鏡ボタンを押すと、検索結果ページに遷移する。
- `PostList`（記事一覧）
    - 記事のタイトル・投稿日・更新日（あれば）・カテゴリを表示

## 使用技術

- Next.js（App Router）
- shacdn ui
- Vercel
- Firebase（マークダウン・画像保存・データベース・認証）
- fuse.js（全文検索）
- phosphor-icons/react（アイコン）
- Markdown→HTML変換：
    - gray-matter
    - remark-parse
    - remark-gfm
    - remark-math
    - remark-emoji
    - remark-rehype
    - rehype-katex（数式表示には KaTeX を使用）
    - rehype-prism-plus（コードハイライトに prism.js を使用）
    - rehype-autolink-headings
    - rehype-stringify
